# 拼多多聊天监控器

一个功能强大的Chrome扩展，用于监控拼多多商品页面的聊天消息变化，支持批量链接处理和自动启动监控。

## ✨ 主要功能

### 🔗 批量链接管理
- **文件导入**: 支持从txt文件批量导入拼多多商品链接
- **智能识别**: 自动识别和过滤有效的拼多多链接
- **批量处理**: 一次性处理多个商品页面的监控

### 🚀 自动启动监控
- **无需手动操作**: 导入链接后自动为每个页面启动聊天监听器
- **静默模式**: 页面不显示，只在后台运行监控程序
- **智能延迟**: 可设置链接打开间隔，避免系统负载过高

### 💬 聊天监控
- **实时监听**: 监控聊天列表的变化和新消息
- **消息通知**: 支持WxPusher和飞书机器人通知
- **历史记录**: 保存聊天消息历史，支持导出

### ⚙️ 智能配置
- **自动保存**: 设置自动保存到本地存储
- **状态监控**: 实时显示监控运行状态
- **错误处理**: 完善的错误处理和恢复机制

## 🚀 快速开始

### 1. 安装扩展
1. 下载扩展文件到本地
2. 打开Chrome扩展管理页面 (`chrome://extensions/`)
3. 启用"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择扩展文件夹

### 2. 使用批量链接功能
1. 准备包含拼多多链接的txt文件
2. 点击扩展图标打开popup页面
3. 点击"📁 从文件导入链接"选择文件
4. 确认"自动开启监听"已勾选
5. 设置延迟时间（建议5-10秒）
6. 点击"🚀 批量打开链接"

### 3. 监控运行
- 系统自动在后台打开所有链接
- 每个页面自动启动聊天监听器
- 页面隐藏，不影响正常浏览
- 实时监控聊天消息变化

## 📁 文件结构

```
pddJianTing/
├── manifest.json          # 扩展配置文件
├── popup.html            # 主界面HTML
├── popup.js              # 主界面逻辑
├── background.js          # 后台脚本
├── content.js             # 内容脚本
├── icons/                 # 图标文件
├── 示例链接列表.txt        # 链接格式示例
├── 批量链接功能使用说明.md  # 详细使用说明
├── 自动启动监控功能说明.md  # 自动启动功能说明
├── 测试批量链接功能.js     # 功能测试脚本
├── 测试自动启动监控.js     # 自动启动测试脚本
└── README.md              # 本文档
```

## 🔧 技术特性

### 自动启动监控流程
1. **链接导入**: 解析文件中的有效链接
2. **批量处理**: 逐个创建标签页，设置延迟
3. **页面加载**: 等待页面完全加载
4. **脚本注入**: 自动注入监控脚本
5. **启动监控**: 发送启动监控消息
6. **静默运行**: 隐藏页面，后台监控

### 静默模式实现
- 使用 `chrome.tabs.hide()` 隐藏标签页
- 通过CSS隐藏页面内容
- 只在后台运行监听程序

### 状态管理
- 实时更新链接数量统计
- 监控运行状态显示
- 自动保存和加载配置

## 📋 配置选项

### 批量链接设置
- **自动开启监听**: 控制是否自动启动监控（推荐开启）
- **延迟时间**: 链接打开间隔（2-15秒）
- **静默模式**: 页面不显示，后台运行

### 监控设置
- **选择器**: 聊天列表的CSS选择器
- **检查间隔**: 监控检查频率（毫秒）
- **最大历史**: 保存的最大消息数量
- **通知设置**: 新消息和消息变化通知

### 自动回复设置
- **API端点**: 自动回复服务的API地址
- **回复延迟**: 自动回复的延迟时间
- **回复模板**: 自定义回复内容模板

## 🧪 测试验证

### 功能测试
运行提供的测试脚本来验证功能：
- `测试批量链接功能.js` - 测试批量链接功能
- `测试自动启动监控.js` - 测试自动启动监控功能

### 测试步骤
1. 在扩展popup页面打开开发者工具
2. 复制测试脚本到控制台
3. 运行测试，查看结果
4. 根据测试结果调整配置

## ⚠️ 注意事项

### 系统要求
- Chrome浏览器版本 88+
- 扩展权限：tabs, storage, scripting
- 足够的系统内存（建议4GB+）

### 性能建议
- 设置合理的延迟时间（5-10秒）
- 单次处理不超过20个链接
- 长时间运行会占用一定系统资源

### 权限说明
- **tabs**: 创建和管理标签页
- **storage**: 保存配置和链接列表
- **scripting**: 注入监控脚本

## 🔍 故障排除

### 常见问题

#### 1. 监控未自动启动
- 检查网络连接
- 重新加载扩展
- 检查控制台错误信息

#### 2. 页面未隐藏
- 更新浏览器版本
- 检查扩展权限
- 使用页面内容隐藏作为备选方案

#### 3. 链接打开失败
- 检查链接格式
- 确认网络连接
- 尝试手动访问链接

## 📈 更新日志

### v2.0.0 (当前版本)
- ✨ 新增批量链接管理功能
- ✨ 新增自动启动监控功能
- ✨ 新增静默模式支持
- 🔧 优化性能和用户体验
- 🐛 修复已知问题

### v1.0.0
- ✨ 基础聊天监控功能
- ✨ 消息通知支持
- ✨ 自动回复功能

## 🤝 技术支持

如遇到问题，请：
1. 查看相关功能说明文档
2. 运行测试脚本验证功能
3. 检查浏览器控制台错误信息
4. 确认扩展权限配置正确

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

---

**注意**: 此扩展需要Chrome扩展环境才能正常工作。请确保在正确的环境中使用。 